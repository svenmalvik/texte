# Docker kommer sjeldent alene.
**Når vi bruker Docker, så er det ofte slik at mange andre teknologier blir involvert. Spørsmålet som stiller seg da er om det kan bli for mye teknologi når vi starter med Docker. I dette innlegget vil jeg fortelle om mine synspunkter om Docker, og hva man bør tenke på før man starter med Docker.**  
## Docker for privatbruk 
For noen år siden skrev jeg et Python program. Programmet skulle sørge for å få meg flere Twitter følgere. Jeg vet, hvorfor skulle man lage et slikt program i det hele tatt? Det skal jeg ikke svare på nå, kanskje senere. Programmet hadde noen avhengigheter til Python moduler som jeg installerte med Pip. Jeg husker at installasjonen av Python og Pip ikke var rett fram. Ubuntu versjonen jeg brukte kom med Python 2, men jeg trengte Python 3 og en tilsvarende Pip versjon. Det tok noe tid før alt var på plass. Som ofte er det teknologier som man ikke bruker hver dag som vi bruker mest tid på. Jeg puttet derfor programmet inn ett Docker image. Slik unngikk jeg installasjon av Python, Pip og de andre modulene senere en gang til. 

To år senere trengte jeg dette programmet igjen. Jeg husket så vidt at jeg brukte Python og at jeg hadde puttet alt inn i et Docker image. Jeg hadde lagret imaget på min Docker Hub side, så jeg slapp å bruke mye tid på å finne ut av hvordan jeg skulle installere, konfigurere, starte og stoppe applikasjonen, dvs. Docker imaget. Det eneste jeg trengte å gjøre var å installere Docker på min maskin. Docker hjalp meg å komme raskt i gang. Men, hvordan ser det ut hos kundene våre som kjører de store prosjektene?
## Docker i mindre bedrifter
Hos kundene våre vil det nok ikke være så enkelt. De har for det meste andre og flere behov. Tjenestene krever ofte høy tilgjengelighet og derfor flere Docker hosts hvor det kan kjøres flere tjenesteinstanser i parallell. Noe må styre Docker kontainerne og fordele disse utover aktive og friske hosts. Kubernetes er en slik styringsteknologi som kan hjelpe og som har blitt veldig populært. Men i et høytilgjengeligmiljø kommer i tillegg noen andre teknologier, som for eksempel lastbalanserer, logging- og monitoreringsverktøy, konfigurasjonsstyringsverktøy. Det jeg vil si er følgende: Docker kommer sjeldent alene. En velfungerende Dockerplatform krever mye kunnskap om mange andre teknologier enn kun Docker. 

Høst 2016 startet jeg i DevOps avdelingen hos Sopra Steria. Jeg skulle hjelpe en kunde med lage en Dockerplattform hvor flere mindre store tjenester skulle kjøre på. Vi hadde mange utfordringer. Når jeg tenker tilbake, så spør jeg meg ofte om det var verdt det. Oppgaven var enorm, og det føltes som å bygge et gigantisk slott får en trebarnsfamilie. Å drifte en Dockerplatform er en fulltidsjobb for to eller flere personer. Det er viktig å være bevist på det før man bestemmer seg for Docker. 

## Docker Platform as a Service
Jeg påstår, og det er sikkert noen som er uenig med meg, at Docker som Plattform as a Service (DPaaS) er en forutsetning for at et kundeprosjekt kan og bør bruke Docker. DPaas er en forutsetning at utviklerne kan fokusere 100% på brukerhistorier. NAV har utviklet en slik plattform, NAIS - NAV Application Infrastructure Service. Plattformen består av Docker - selvfølgelig -, Kubernetes, Træfik, Grafana, InfluxDB og noen andre teknologier. NAIS vedlikeholdes av et team på 4-6 personer som sørger for at plattformen er enkelt å bruke og at den alltid er tilgjengelig. For de som deployer sine tjenester til NAIS, er plattformen en forenkling av hverdagen. Før NAIS ble utviklet, så måtte utviklerne deploye en tjenesteinstans til en egen JBoss server. JBoss kjørte selv på en egen host. Mange JBoss servere på mange hosts betyr mye konfigurasjon og mye ekstrajobb. I dag, når vi ruller for eksempel fire tjenesteinstanser ut til NAIS, så spres disse utover alle NAIS hostene, helautomatisk. Skulle en host ha problemer og må restartes - det betyr at Docker kontainerne som kjører applikasjonene vil stoppes - så starter NAIS disse på en annen host, også helautomatisk. 

DPaaS gjør at utviklerne er mindre avhengig av de mennekene som tidligere har driftet JBoss. I tillegg får utviklerne mer ansvar. Dockerfilen som beskriver hvordan en applikasjon skal kjøre inn i en kontainer, er nå blitt en del av applikasjonsprosjektet. Filen ligger sammen med en NAIS konfigurasjonsfil og all applikasjonskode inn i prosjektet. Fordelen med det er at alt ligger sammen i ett og samme prosjekt. Slikt vil utviklerne  ta full eierskap - you build it, you run it.

## Konklusjon
Jeg er glad for at jeg kan bruke Docker privat. Teknologien hjelper meg å ta være på mine applikasjoner over tid. Jeg forholder meg til en teknologi. Hos kundene våre ønsker jeg helst et velfungerende og brukervennlig grensesnitt for Docker. Slik kan jeg fokusere på brukerhistorier og selve tjenestene som skal lages. NAIS er en slik plattform. Den er veldig tilpasset NAV, men det kommer stadig flere tilsvarende Dockerplatformer, og som er minst like gøy å jobbe med.
